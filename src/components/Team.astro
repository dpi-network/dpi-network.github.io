---
export interface Role {
  team: string
  role: string
}

export interface Person {
  name: string
  primaryRole: string
  image?: string
  roles?: Role[]
}

const { members } = Astro.props as { members: Person[] }
---

<section class="py-12">
  <ul class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
    {members.map((person) => {
      const hasImage = person.image && person.image.trim() !== ""

      return (
        <li
          class="
            rounded-2xl bg-neutral-200 dark:bg-neutral-900 p-6 
            text-center shadow-sm ring-5 ring-black/5 transition hover:shadow-md"
        >
          {/* Avatar */}
          {hasImage ? (
            <img
              src={person.image}
              alt={`Photo of ${person.name}`}
              loading="lazy"
              class="mx-auto mb-4 h-24 w-24 rounded-full object-cover"
            />
          ) : (
            <div
              class="
                mx-auto mb-4 flex h-24 w-24 items-center justify-center rounded-full
                bg-gray-100 text-gray-400
                [data-theme='dark']&:bg-gray-800 [data-theme='dark']&:text-gray-500
              "
            >
              {/* FA user icon */}
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 448 512"
                class="h-12 w-12"
                aria-hidden="true"
              >
                <path
                  fill="currentColor"
                  d="M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304h-91.4z"
                />
              </svg>
            </div>
          )}

          {/* Name */}
          <h3 class="text-lg font-semibold text-neutral-800 dark:text-neutral-200">
            {person.name}
          </h3>

          {/* Primary role */}
          <p class="text-sm text-neutral-800 dark:text-neutral-200">
            {person.primaryRole}
          </p>

          {/* Secondary roles */}
          {person.roles && person.roles.length > 0 && (
            <ul class="mt-4 flex flex-wrap justify-center gap-2">
              {person.roles.map((r) => (
                <li
                  class="
                    rounded-full px-3 py-1 text-xs
                    text-neutral-200
                    bg-gray-800 dark:text-neutral-200
                  "
                >
                  {r.team} Â· {r.role}
                </li>
              ))}
            </ul>
          )}
        </li>
      )
    })}
  </ul>
</section>